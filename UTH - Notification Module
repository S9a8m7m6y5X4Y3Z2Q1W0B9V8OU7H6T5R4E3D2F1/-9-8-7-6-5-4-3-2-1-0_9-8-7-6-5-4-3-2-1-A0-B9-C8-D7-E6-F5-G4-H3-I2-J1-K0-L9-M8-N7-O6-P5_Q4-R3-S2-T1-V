local TweenService = game:GetService("TweenService")

local NotificationModule = {}

function NotificationModule.createNotification(title, message)
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "NotificationGUI"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = game.CoreGui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0.4, 0, 0.2, 0)
    frame.Position = UDim2.new(0.3, 0, -0.2, 0)
    frame.BackgroundColor3 = Color3.fromRGB(44, 62, 82)
    frame.BorderSizePixel = 0
    frame.Parent = screenGui

    local uiCorner = Instance.new("UICorner")
    uiCorner.CornerRadius = UDim.new(0.1, 0)
    uiCorner.Parent = frame

    local uiStroke = Instance.new("UIStroke")
    uiStroke.Thickness = 3
    uiStroke.Color = Color3.fromRGB(26, 189, 158)
    uiStroke.Parent = frame

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(0.9, 0, 0.3, 0)
    titleLabel.Position = UDim2.new(0.05, 0, 0.05, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.TextScaled = true
    titleLabel.TextWrapped = true
    titleLabel.Text = ""
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.Parent = frame

    local messageLabel = Instance.new("TextLabel")
    messageLabel.Size = UDim2.new(0.9, 0, 0.3, 0)
    messageLabel.Position = UDim2.new(0.05, 0, 0.4, 0)
    messageLabel.BackgroundTransparency = 1
    messageLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    messageLabel.TextScaled = true
    messageLabel.TextWrapped = true
    messageLabel.Text = ""
    messageLabel.Font = Enum.Font.Gotham
    messageLabel.Parent = frame

    local loadingBarBackground = Instance.new("Frame")
    loadingBarBackground.Size = UDim2.new(0.9, 0, 0.05, 0)
    loadingBarBackground.Position = UDim2.new(0.05, 0, 0.75, 0)
    loadingBarBackground.BackgroundColor3 = Color3.fromRGB(34, 47, 62)
    loadingBarBackground.BorderSizePixel = 0
    loadingBarBackground.Parent = frame

    local loadingBarBackgroundCorner = Instance.new("UICorner")
    loadingBarBackgroundCorner.CornerRadius = UDim.new(0.5, 0)
    loadingBarBackgroundCorner.Parent = loadingBarBackground

    local loadingBar = Instance.new("Frame")
    loadingBar.Size = UDim2.new(0, 0, 1, 0)
    loadingBar.BackgroundColor3 = Color3.fromRGB(26, 189, 158)
    loadingBar.BorderSizePixel = 0
    loadingBar.Parent = loadingBarBackground

    local loadingBarCorner = Instance.new("UICorner")
    loadingBarCorner.CornerRadius = UDim.new(0.5, 0)
    loadingBarCorner.Parent = loadingBar

    local function playTypingAnimation(textLabel, text)
        for i = 1, #text do
            textLabel.Text = string.sub(text, 1, i)
            wait(0.0003)
        end
    end

    local tweenInfoAppear = TweenInfo.new(0.7, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
    local tweenAppear = TweenService:Create(frame, tweenInfoAppear, {Position = UDim2.new(0.3, 0, 0.05, 0)})
    tweenAppear:Play()
    tweenAppear.Completed:Connect(function()
        playTypingAnimation(titleLabel, title)
        wait(0.01)
        playTypingAnimation(messageLabel, message)
    end)

    local tweenInfoLoading = TweenInfo.new(4, Enum.EasingStyle.Linear, Enum.EasingDirection.Out)
    local tweenLoading = TweenService:Create(loadingBar, tweenInfoLoading, {Size = UDim2.new(1, 0, 1, 0)})
    tweenLoading:Play()

    wait(4.4)

    local tweenInfoDisappear = TweenInfo.new(0.7, Enum.EasingStyle.Quad, Enum.EasingDirection.In)
    local tweenDisappear = TweenService:Create(frame, tweenInfoDisappear, {Position = UDim2.new(0.3, 0, -0.2, 0)})
    tweenDisappear:Play()

    wait(0.7)

    screenGui:Destroy()
end

return NotificationModule
